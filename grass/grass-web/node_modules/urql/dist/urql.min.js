var e=require("@urql/core"),t=require("react"),n=require("wonka"),r=e.createClient({url:"/graphql"}),u=t.createContext(r),o=u.Provider,i=u.Consumer;u.displayName="UrqlContext";var c=function(){return t.useContext(u)};function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0,operation:void 0},f=function(e,t){var n=a({},e,t,{fetching:!!t.fetching,stale:!!t.stale});return function(e,t){if("object"!=typeof e||"object"!=typeof t)return e!==t;for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}(e,n)?n:e},l=function(e,t){for(var n=0,r=t.length;n<r;n++)if(e[n]!==t[n])return!0;return!1};function v(r){var u=t.useRef(!0),o=c(),i=t.useState(s),f=i[0],l=i[1];function v(e){return u.current&&l({fetching:!1,stale:!!e.stale,data:e.data,error:e.error,extensions:e.extensions,operation:e.operation}),e}var p=t.useCallback((function(t,u){return l(a({},s,{fetching:!0})),n.toPromise(o.executeMutation(e.createRequest(r,t),u||{})).then(v)}),[o,r,l]);function x(){u.current=!1}return t.useEffect((function(){return x}),[]),[f,p]}function p(n,r){var u=t.useRef(void 0);return t.useMemo((function(){var t=e.createRequest(n,r);return void 0!==u.current&&u.current.key===t.key?u.current:(u.current=t,t)}),[n,r])}var x=!1;function y(e){var r=c(),u=function(e){if(!e._react){var t=new Set,r=new Map;e.operations$&&n.subscribe((function(e){"teardown"===e.kind&&t.has(e.key)&&(t.delete(e.key),r.delete(e.key))}))(e.operations$),e._react={get:function(e){return r.get(e)},set:function(e,n){t.delete(e),r.set(e,n)},dispose:function(e){t.add(e)}}}return e._react}(r),o=function(e,t){return e.suspense&&(!t||!1!==t.suspense)}(r,e.context),i=p(e.query,e.variables);function v(e){u.set(i.key,e)}var y=t.useMemo((function(){if(e.pause)return null;var t=r.executeQuery(i,a({},{requestPolicy:e.requestPolicy},e.context));return o?n.onPush(v)(t):t}),[r,i,o,e.pause,e.requestPolicy,e.context]),d=t.useCallback((function(e,t){if(!e)return{fetching:!1};var r=u.get(i.key);if(r){if(t&&null!=r&&"then"in r)throw r}else{var o,c=n.subscribe((function(e){r=e,o&&o(r)}))(n.takeWhile((function(){return t&&!o||!r}))(e));if(null==r&&t){var a=new Promise((function(e){o=e}));throw u.set(i.key,a),a}c.unsubscribe()}return r||{fetching:!0}}),[i]),h=[r,i,e.requestPolicy,e.context,e.pause],b=t.useState((function(){x=!0;try{return[y,f(s,d(y,o)),h]}finally{x=!1}})),g=b[0],q=b[1],k=g[1];return y!==g[0]&&l(g[2],h)&&q([y,k=f(g[1],d(y,o)),h]),t.useEffect((function(){var e=g[0],t=g[2][1],r=!1,o=function(e){r=!0,x||q((function(t){var n=f(t[1],e);return t[1]!==n?[t[0],n,t[2]]:t}))};if(e){var i=n.subscribe(o)(n.onEnd((function(){o({fetching:!1})}))(e));return r||o({fetching:!0}),function(){u.dispose(t.key),i.unsubscribe()}}o({fetching:!1})}),[u,g[0],g[2][1]]),[k,t.useCallback((function(t){var n=a({},{requestPolicy:e.requestPolicy},e.context,t),u=r.executeQuery(i,n);q((function(e){var t="network-only"!==n.requestPolicy?d(u,!1):{fetching:!0},r=f(e[1],t);return e[1]!==r?[u,r,e[2]]:e}))}),[r,i,d,e.requestPolicy,e.context])]}function d(e,r){var u=c(),o=p(e.query,e.variables),i=t.useRef(r);i.current=r;var v=t.useMemo((function(){return e.pause?null:u.executeSubscription(o,e.context)}),[u,o,e.pause,e.context]),x=[u,o,e.context,e.pause],y=t.useState((function(){return[v,a({},s,{fetching:!!v}),x]})),d=y[0],h=y[1],b=d[1];function g(e){h((function(t){var n=f(t[1],e);return t[1]===n?t:(i.current&&t[1].data!==n.data&&(n.data=i.current(t[1].data,n.data)),[t[0],n,t[2]])}))}return v!==d[0]&&l(d[2],x)&&h([v,b=f(d[1],{fetching:!!v}),x]),t.useEffect((function(){var e=g;if(d[0])return n.subscribe(e)(n.onEnd((function(){e({fetching:!1})}))(d[0])).unsubscribe;e({fetching:!1})}),[d[0]]),[b,t.useCallback((function(t){var n=u.executeSubscription(o,a({},e.context,t));h((function(e){return[n,e[1],e[2]]}))}),[u,e.context,o])]}Object.keys(e).forEach((function(t){"default"!==t&&(exports[t]=e[t])})),exports.Consumer=i,exports.Context=u,exports.Mutation=function(e){var t=v(e.query);return e.children(a({},t[0],{executeMutation:t[1]}))},exports.Provider=o,exports.Query=function(e){var t=y(e);return e.children(a({},t[0],{executeQuery:t[1]}))},exports.Subscription=function(e){var t=d(e,e.handler);return e.children(a({},t[0],{executeSubscription:t[1]}))},exports.useClient=c,exports.useMutation=v,exports.useQuery=y,exports.useSubscription=d;
//# sourceMappingURL=urql.min.js.map
