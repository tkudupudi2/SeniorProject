{"version":3,"sources":["../../src/css.ts"],"names":["isObject","mergeWith","merge","runIfFn","isCssVar","isString","expandResponsive","pseudoSelectors","systemProps","systemPropConfigs","isCSSVariableTokenValue","key","value","startsWith","resolveTokenValue","theme","getVar","val","__cssMap","varRef","getValue","valueSplit","split","map","v","trim","tokenValue","fallbackValue","getCss","options","configs","pseudos","css","stylesOrFn","nested","_styles","styles","computedStyles","valueOrFn","config","property","rawValue","transform","processResult","configProperty","static","staticStyles","Array","isArray","cssFn"],"mappings":"AAAA,SAEEA,QAFF,EAGEC,SAAS,IAAIC,KAHf,EAIEC,OAJF,EAKEC,QALF,EAMEC,QANF,QAOO,kBAPP;AASA,SAASC,gBAAT,QAAiC,qBAAjC;AAEA,SAASC,eAAT,QAAgC,WAAhC;AACA,SAASC,WAAW,IAAIC,iBAAxB,QAAiD,UAAjD;;AAGA,IAAMC,uBAAuB,GAAG,CAACC,GAAD,EAAcC,KAAd,KAC9BD,GAAG,CAACE,UAAJ,CAAe,IAAf,KAAwBR,QAAQ,CAACO,KAAD,CAAhC,IAA2C,CAACR,QAAQ,CAACQ,KAAD,CADtD;;AAGA,IAAME,iBAAiB,GAAG,CAACC,KAAD,EAAcH,KAAd,KAAgC;AAAA;;AACxD,MAAIA,KAAK,IAAI,IAAb,EAAmB,OAAOA,KAAP;;AAEnB,MAAMI,MAAM,GAAIC,GAAD;AAAA;;AAAA,8BAAiBF,KAAK,CAACG,QAAvB,4CAAiB,gBAAiBD,GAAjB,CAAjB,qBAAiB,oBAAuBE,MAAxC;AAAA,GAAf;;AACA,MAAMC,QAAQ,GAAIH,GAAD;AAAA;;AAAA,sBAAiBD,MAAM,CAACC,GAAD,CAAvB,sBAAgCA,GAAhC;AAAA,GAAjB;;AAEA,MAAMI,UAAU,GAAGT,KAAK,CAACU,KAAN,CAAY,GAAZ,EAAiBC,GAAjB,CAAsBC,CAAD,IAAOA,CAAC,CAACC,IAAF,EAA5B,CAAnB;AACA,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BN,UAApC;AACAT,EAAAA,KAAK,uBAAGI,MAAM,CAACU,UAAD,CAAT,uBAAyBN,QAAQ,CAACO,aAAD,CAAjC,mBAAoDP,QAAQ,CAACR,KAAD,CAAjE;AAEA,SAAOA,KAAP;AACD,CAXD;;AAmBA,OAAO,SAASgB,MAAT,CAAgBC,OAAhB,EAAwC;AAC7C,MAAM;AAAEC,IAAAA,OAAO,GAAG,EAAZ;AAAgBC,IAAAA,OAAO,GAAG,EAA1B;AAA8BhB,IAAAA;AAA9B,MAAwCc,OAA9C;;AAEA,MAAMG,GAAG,GAAG,SAANA,GAAM,CAACC,UAAD,EAAmBC,MAAnB,EAAsC;AAAA,QAAnBA,MAAmB;AAAnBA,MAAAA,MAAmB,GAAV,KAAU;AAAA;;AAChD,QAAMC,OAAO,GAAGhC,OAAO,CAAC8B,UAAD,EAAalB,KAAb,CAAvB;;AACA,QAAMqB,MAAM,GAAG9B,gBAAgB,CAAC6B,OAAD,CAAhB,CAA0BpB,KAA1B,CAAf;AAEA,QAAIsB,cAAoB,GAAG,EAA3B;;AAEA,SAAK,IAAI1B,GAAT,IAAgByB,MAAhB,EAAwB;AAAA;;AACtB,UAAME,SAAS,GAAGF,MAAM,CAACzB,GAAD,CAAxB;AAEA;AACN;AACA;AACA;;AACM,UAAIC,KAAK,GAAGT,OAAO,CAACmC,SAAD,EAAYvB,KAAZ,CAAnB;AAEA;AACN;AACA;AACA;;AACM,UAAIJ,GAAG,IAAIoB,OAAX,EAAoB;AAClBpB,QAAAA,GAAG,GAAGoB,OAAO,CAACpB,GAAD,CAAb;AACD;AAED;AACN;AACA;AACA;AACA;AACA;AACA;;;AACM,UAAID,uBAAuB,CAACC,GAAD,EAAMC,KAAN,CAA3B,EAAyC;AACvCA,QAAAA,KAAK,GAAGE,iBAAiB,CAACC,KAAD,EAAQH,KAAR,CAAzB;AACD;;AAED,UAAI2B,MAAM,GAAGT,OAAO,CAACnB,GAAD,CAApB;;AAEA,UAAI4B,MAAM,KAAK,IAAf,EAAqB;AACnBA,QAAAA,MAAM,GAAG;AAAEC,UAAAA,QAAQ,EAAE7B;AAAZ,SAAT;AACD;;AAED,UAAIX,QAAQ,CAACY,KAAD,CAAZ,EAAqB;AAAA;;AACnByB,QAAAA,cAAc,CAAC1B,GAAD,CAAd,0BAAsB0B,cAAc,CAAC1B,GAAD,CAApC,kCAA6C,EAA7C;AACA0B,QAAAA,cAAc,CAAC1B,GAAD,CAAd,GAAsBT,KAAK,CAAC,EAAD,EAAKmC,cAAc,CAAC1B,GAAD,CAAnB,EAA0BqB,GAAG,CAACpB,KAAD,EAAQ,IAAR,CAA7B,CAA3B;AACA;AACD;;AAED,UAAI6B,QAAQ,mCAAGF,MAAH,qBAAG,QAAQG,SAAX,oBAAG,QAAQA,SAAR,CAAoB9B,KAApB,EAA2BG,KAA3B,EAAkCoB,OAAlC,CAAH,gCAAiDvB,KAA7D;AAEA;AACN;AACA;AACA;AACA;AACA;AACA;;AACM6B,MAAAA,QAAQ,GAAG,YAAAF,MAAM,SAAN,aAAQI,aAAR,GAAwBX,GAAG,CAACS,QAAD,EAAW,IAAX,CAA3B,GAA8CA,QAAzD;AAEA;AACN;AACA;AACA;AACA;AACA;AACA;;AACM,UAAMG,cAAc,GAAGzC,OAAO,aAACoC,MAAD,qBAAC,SAAQC,QAAT,EAAmBzB,KAAnB,CAA9B;;AAEA,UAAI,CAACmB,MAAD,gBAAWK,MAAX,aAAW,SAAQM,MAAvB,EAA+B;AAC7B,YAAMC,YAAY,GAAG3C,OAAO,CAACoC,MAAM,CAACM,MAAR,EAAgB9B,KAAhB,CAA5B;AACAsB,QAAAA,cAAc,GAAGnC,KAAK,CAAC,EAAD,EAAKmC,cAAL,EAAqBS,YAArB,CAAtB;AACD;;AAED,UAAIF,cAAc,IAAIG,KAAK,CAACC,OAAN,CAAcJ,cAAd,CAAtB,EAAqD;AACnD,aAAK,IAAMJ,QAAX,IAAuBI,cAAvB,EAAuC;AACrCP,UAAAA,cAAc,CAACG,QAAD,CAAd,GAA2BC,QAA3B;AACD;;AACD;AACD;;AAED,UAAIG,cAAJ,EAAoB;AAClB,YAAIA,cAAc,KAAK,GAAnB,IAA0B5C,QAAQ,CAACyC,QAAD,CAAtC,EAAkD;AAChDJ,UAAAA,cAAc,GAAGnC,KAAK,CAAC,EAAD,EAAKmC,cAAL,EAAqBI,QAArB,CAAtB;AACD,SAFD,MAEO;AACLJ,UAAAA,cAAc,CAACO,cAAD,CAAd,GAA2CH,QAA3C;AACD;;AACD;AACD;;AAED,UAAIzC,QAAQ,CAACyC,QAAD,CAAZ,EAAwB;AACtBJ,QAAAA,cAAc,GAAGnC,KAAK,CAAC,EAAD,EAAKmC,cAAL,EAAqBI,QAArB,CAAtB;AACA;AACD;;AAEDJ,MAAAA,cAAc,CAAC1B,GAAD,CAAd,GAAsB8B,QAAtB;AACD;;AAED,WAAOJ,cAAP;AACD,GAhGD;;AAkGA,SAAOL,GAAP;AACD;AAED,OAAO,IAAMA,GAAG,GAAII,MAAD,IAA8BrB,KAAD,IAAgB;AAC9D,MAAMkC,KAAK,GAAGrB,MAAM,CAAC;AACnBb,IAAAA,KADmB;AAEnBgB,IAAAA,OAAO,EAAExB,eAFU;AAGnBuB,IAAAA,OAAO,EAAErB;AAHU,GAAD,CAApB;AAKA,SAAOwC,KAAK,CAACb,MAAD,CAAZ;AACD,CAPM","sourcesContent":["import {\n  Dict,\n  isObject,\n  mergeWith as merge,\n  runIfFn,\n  isCssVar,\n  isString,\n} from \"@chakra-ui/utils\"\nimport * as CSS from \"csstype\"\nimport { expandResponsive } from \"./expand-responsive\"\nimport { Config, PropConfig } from \"./prop-config\"\nimport { pseudoSelectors } from \"./pseudos\"\nimport { systemProps as systemPropConfigs } from \"./system\"\nimport { CssTheme, StyleObjectOrFn } from \"./types\"\n\nconst isCSSVariableTokenValue = (key: string, value: any): value is string =>\n  key.startsWith(\"--\") && isString(value) && !isCssVar(value)\n\nconst resolveTokenValue = (theme: Dict, value: string) => {\n  if (value == null) return value\n\n  const getVar = (val: string) => theme.__cssMap?.[val]?.varRef\n  const getValue = (val: string) => getVar(val) ?? val\n\n  const valueSplit = value.split(\",\").map((v) => v.trim())\n  const [tokenValue, fallbackValue] = valueSplit\n  value = getVar(tokenValue) ?? getValue(fallbackValue) ?? getValue(value)\n\n  return value\n}\n\ninterface GetCSSOptions {\n  theme: CssTheme\n  configs?: Config\n  pseudos?: Record<string, CSS.Pseudos | (string & {})>\n}\n\nexport function getCss(options: GetCSSOptions) {\n  const { configs = {}, pseudos = {}, theme } = options\n\n  const css = (stylesOrFn: Dict, nested = false) => {\n    const _styles = runIfFn(stylesOrFn, theme)\n    const styles = expandResponsive(_styles)(theme)\n\n    let computedStyles: Dict = {}\n\n    for (let key in styles) {\n      const valueOrFn = styles[key]\n\n      /**\n       * allows the user to pass functional values\n       * boxShadow: theme => `0 2px 2px ${theme.colors.red}`\n       */\n      let value = runIfFn(valueOrFn, theme)\n\n      /**\n       * converts pseudo shorthands to valid selector\n       * \"_hover\" => \"&:hover\"\n       */\n      if (key in pseudos) {\n        key = pseudos[key]\n      }\n\n      /**\n       * allows the user to use theme tokens in css vars\n       * { --banner-height: \"sizes.md\" } => { --banner-height: \"var(--chakra-sizes-md)\" }\n       *\n       * You can also provide fallback values\n       * { --banner-height: \"sizes.no-exist, 40px\" } => { --banner-height: \"40px\" }\n       */\n      if (isCSSVariableTokenValue(key, value)) {\n        value = resolveTokenValue(theme, value)\n      }\n\n      let config = configs[key]\n\n      if (config === true) {\n        config = { property: key } as PropConfig\n      }\n\n      if (isObject(value)) {\n        computedStyles[key] = computedStyles[key] ?? {}\n        computedStyles[key] = merge({}, computedStyles[key], css(value, true))\n        continue\n      }\n\n      let rawValue = config?.transform?.(value, theme, _styles) ?? value\n\n      /**\n       * Used for `layerStyle`, `textStyle` and `apply`. After getting the\n       * styles in the theme, we need to process them since they might\n       * contain theme tokens.\n       *\n       * `processResult` is the config property we pass to `layerStyle`, `textStyle` and `apply`\n       */\n      rawValue = config?.processResult ? css(rawValue, true) : rawValue\n\n      /**\n       * allows us define css properties for RTL and LTR.\n       *\n       * const marginStart = {\n       *   property: theme => theme.direction === \"rtl\" ? \"marginRight\": \"marginLeft\",\n       * }\n       */\n      const configProperty = runIfFn(config?.property, theme)\n\n      if (!nested && config?.static) {\n        const staticStyles = runIfFn(config.static, theme)\n        computedStyles = merge({}, computedStyles, staticStyles)\n      }\n\n      if (configProperty && Array.isArray(configProperty)) {\n        for (const property of configProperty) {\n          computedStyles[property] = rawValue\n        }\n        continue\n      }\n\n      if (configProperty) {\n        if (configProperty === \"&\" && isObject(rawValue)) {\n          computedStyles = merge({}, computedStyles, rawValue)\n        } else {\n          computedStyles[configProperty as string] = rawValue\n        }\n        continue\n      }\n\n      if (isObject(rawValue)) {\n        computedStyles = merge({}, computedStyles, rawValue)\n        continue\n      }\n\n      computedStyles[key] = rawValue\n    }\n\n    return computedStyles\n  }\n\n  return css\n}\n\nexport const css = (styles: StyleObjectOrFn) => (theme: any) => {\n  const cssFn = getCss({\n    theme,\n    pseudos: pseudoSelectors,\n    configs: systemPropConfigs,\n  })\n  return cssFn(styles)\n}\n"],"file":"css.js"}