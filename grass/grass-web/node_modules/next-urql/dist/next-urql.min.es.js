import e,{useState as n,createElement as t}from"react";import r from"react-ssr-prepass";import{createClient as i,ssrExchange as o,dedupExchange as u,cacheExchange as a,fetchExchange as l,Provider as s}from"urql";function p(){return(p=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var c,f=null;function v(){f=null}function d(){return null}function h(e,n){var t="undefined"==typeof window;return!t&&f||((f=i(p({},e,{suspense:n&&(t||e.suspense)}))).toJSON=d),f}function m(){}function g(i,f){return f||(f={}),function(d){var g=Boolean((d.getInitialProps||f.ssr)&&!f.neverSuspend),P=function(r){var f=r.pageProps,m=r.urqlClient,P=r.urqlState,q=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===n.indexOf(r)&&(t[r]=e[r]);return t}(r,["pageProps","urqlClient","urqlState"]),C=n(0),y=f&&f.urqlState||P,S=e.useMemo((function(){if(m)return m;c&&"undefined"!=typeof window||(c=o({initialState:y,isClient:!0}));var e=i(c);return e.exchanges||(e.exchanges=[u,a,c,l]),h(e,g)}),[m,y,C[0]]);return t(s,{value:S},t(d,p({},q,{pageProps:f,urqlClient:S,resetUrqlClient:function(){v(),c=o({initialState:void 0}),C[1](C[0]+1)}})))};return P.displayName="withUrqlClient("+(d.displayName||d.name||"Component")+")",(d.getInitialProps||f.ssr)&&(P.getInitialProps=function(e){function n(){return p({},S,{urqlState:q?q.extractData():void 0,urqlClient:y})}function s(){if("undefined"!=typeof window)return p({},S,{urqlClient:y});var e=p({},S,{urqlClient:y}),i=g?e:{pageProps:e};const o=function(){if(!f.neverSuspend)return Promise.resolve(r(t(v,i))).then(m)}();return o&&o.then?o.then(n):n()}function c(e){S=e}try{var v=e.AppTree,g=!!e.Component,P=g?e.ctx:e,q=o({initialState:void 0}),C=i(q,P);C.exchanges||(C.exchanges=[u,a,q,l]);var y=h(C,!f.neverSuspend);y&&(P.urqlClient=y);var S={};const n=function(){if(d.getInitialProps)return Promise.resolve(d.getInitialProps(e)).then(c)}();return Promise.resolve(n&&n.then?n.then(s):s())}catch(e){return Promise.reject(e)}}),P}}export{h as initUrqlClient,g as withUrqlClient};
//# sourceMappingURL=next-urql.min.es.js.map
