import{Kind as e}from"graphql/language/kinds.mjs";import{valueFromASTUntyped as t}from"graphql/utilities/valueFromASTUntyped.mjs";import{print as r}from"graphql/language/printer.mjs";import{_ as n}from"./08e6d3e1.min.mjs";import{share as i,mergeMap as a,take as o,combine as s,scan as u,fromPromise as l,empty as f,concat as c,map as p,filter as d,merge as v,fromArray as y,makeSubject as m}from"wonka";import{stringifyVariables as h,createRequest as k,formatDocument as _,makeOperation as g}from"@urql/core";function O(e){return e.name.value}function b(e){return e.selectionSet?e.selectionSet.selections:[]}function q(e,r){var n={},i=0;if(e.arguments&&e.arguments.length)for(var a=0,o=e.arguments.length;a<o;a++){var s=e.arguments[a],u=t(s.value,r);null!=u&&(n[O(s)]=u,i++)}return 0<i?n:null}function w(e,r){var n={};if(!r)return n;if(e.variableDefinitions)for(var i=0,a=e.variableDefinitions.length;i<a;i++){var o=e.variableDefinitions[i],s=O(o.variable);n[s]=void 0===r[s]&&o.defaultValue?t(o.defaultValue,r):r[s]}for(var u in r)u in n||(n[u]=r[u]);return n}function E(e,t,r){if(!e)throw(e=Error((t||"Minfied Error #"+r+"\n")+"\nhttps://bit.ly/2XbVrpR#"+r)).name="Graphcache Error",e}function N(t){for(var r=0;r<t.definitions.length;r++)if(t.definitions[r].kind===e.OPERATION_DEFINITION)return t.definitions[r];E(!1,"",1)}function x(t){for(var r={},n=0;n<t.definitions.length;n++){var i=t.definitions[n];i.kind===e.FRAGMENT_DEFINITION&&(r[O(i)]=i)}return r}function K(e,r){var n=e.directives;if(!n)return!0;for(var i=0,a=n.length;i<a;i++){var o=n[i];if(("include"===(e=O(o))||"skip"===e)&&o.arguments&&o.arguments[0]&&"if"===O(o.arguments[0]))return r=t(o.arguments[0].value,r),"include"===e?!!r:!r}return!0}function T(e){for(var t={},r=0;r<e.length;r++)t[e[r].name]=e[r];return t}new Set;var L=/^__/;function S(e,t,r){return!!L.test(r)||(M(e,t),!!(e=e.types[t].fields[r])&&"NON_NULL"!==e.type.kind)}function F(e,t,r){return M(e,t),!!(e=e.types[t].fields[r])&&"LIST"===(e="NON_NULL"===e.type.kind?e.type.ofType:e.type).kind&&"NON_NULL"!==e.ofType.kind}function M(e,t){E(e.types[t]&&"OBJECT"===e.types[t].kind,"",3)}function A(e,t){return t?e+"("+h(t)+")":e}function I(e){var t=e.indexOf("(");return-1<t?{fieldKey:e,fieldName:e.slice(0,t),arguments:JSON.parse(e.slice(t+1,-1))}:{fieldKey:e,fieldName:e,arguments:null}}function C(e,t){return e.replace(/\./g,"%2e")+"."+t}function D(e){var t=e.indexOf(".");return{entityKey:e.slice(0,t).replace(/%2e/g,"."),fieldKey:e=e.slice(t+1)}}function j(){return Object.create(null)}var P=null,R=null,J=null,Q=null,U=!1;function B(e,t,r,n){P=e,R=t,J=j(),U=!!n,r?n||0<t.optimisticOrder.length?(n||t.commutativeKeys.has(r)?n&&t.commutativeKeys.delete(r):ae(t,r),Q=r,-1===t.optimisticOrder.indexOf(r)&&t.optimisticOrder.unshift(r),t.refLock[r]||(t.refLock[r]=j(),t.links.optimistic[r]=new Map,t.records.optimistic[r]=new Map)):(Q=null,se(t,r)):Q=null}function G(){var e=R,t=Q;if(U=!1,Q=null,t&&-1<e.optimisticOrder.indexOf(t))for(t=e.optimisticOrder.length;0<=--t&&e.refLock[e.optimisticOrder[t]]&&e.commutativeKeys.has(e.optimisticOrder[t]);)fe(e.optimisticOrder[t]);J=R=P=null,e.defer||(e.defer=!0,Promise.resolve().then((function(){B("read",e,null),R.gc.forEach($),function(){if(R.storage){U=!0,P="read";var e=j();R.persist.forEach((function(t){var r,n=D(t),i=n.entityKey;e[t]=void 0!==(r=re(i,n=n.fieldKey))?":"+h(r):void 0!==(r=te(i,n))?h(r):void 0})),U=!1,R.storage.writeData(e),R.persist.clear()}}(),G(),e.defer=!1})))}function V(){return E(null!==J,"",2),J}function z(e,t,r,n){var i=(e=Q?e.optimistic[Q]:e.base).get(t);void 0===i&&e.set(t,i=j()),void 0!==n||Q?i[r]=n:delete i[r]}function X(e,t,r){for(var n,i=!U&&"read"===P&&Q&&R.commutativeKeys.has(Q),a=0,o=R.optimisticOrder.length;a<o;a++){var s=R.optimisticOrder[a],u=e.optimistic[s];if(i=i&&s!==Q,!(!u||i&&R.commutativeKeys.has(s)||U&&"write"!==P&&!R.commutativeKeys.has(s))&&void 0!==(n=u.get(t))&&r in n)return n[r]}return void 0!==(n=e.base.get(t))?n[r]:void 0}function H(e,t,r,n){var i=void 0!==t[r]?t[r]:0;t=t[r]=i+n|0,void 0!==e&&(0>=t?e.add(r):0>=i&&0<t&&e.delete(r))}function W(e,t,r,n){if("string"==typeof r)H(e,t,r,n);else if(Array.isArray(r))for(var i=0,a=r.length;i<a;i++){var o=r[i];o&&H(e,t,o,n)}}function Y(e,t,r){if(void 0!==r)for(var n in r)t.has(n)||(e.push(I(n)),t.add(n))}function Z(e,t,r,n){Y(e,t,n.base.get(r));for(var i=0,a=R.optimisticOrder.length;i<a;i++){var o=n.optimistic[R.optimisticOrder[i]];void 0!==o&&Y(e,t,o.get(r))}}function $(e,t,r){if(0<(R.refCount[e]||0))r.delete(e);else{for(var n in R.refLock){if(0<((t=R.refLock[n])[e]||0))return;delete t[e]}if(delete R.refCount[e],r.delete(e),R.records.base.delete(e),n=R.links.base.get(e))for(var i in R.links.base.delete(e),n)W(r,R.refCount,n[i],-1)}}function ee(e,t){"__typename"!==t&&(e!==R.queryRootKey?J[e]=!0:void 0!==t&&(J[e+"."+t]=!0))}function te(e,t){return ee(e,t),X(R.records,e,t)}function re(e,t){return ee(e,t),X(R.links,e,t)}function ne(e,t,r){ee(e,t),!U&&R.storage&&R.persist.add(C(e,t)),z(R.records,e,t,r)}function ie(e,t,r){var n=R;if(Q)var i=n.refLock[Q]||(n.refLock[Q]=j()),a=n.links.optimistic[Q];else{i=n.refCount,a=n.links.base;var o=n.gc}a=(a=a&&a.get(e))&&a[t],ee(e,t),!U&&R.storage&&R.persist.add(C(e,t)),z(n.links,e,t,r),W(o,i,a,-1),W(o,i,r,1)}function ae(e,t){var r=e.optimisticOrder.indexOf(t);-1===r?e.optimisticOrder.unshift(t):e.commutativeKeys.has(t)||(oe(e,t),e.optimisticOrder.splice(r,1),e.optimisticOrder.unshift(t)),e.commutativeKeys.add(t)}function oe(e,t){e.refLock[t]&&(delete e.refLock[t],delete e.records.optimistic[t],delete e.links.optimistic[t])}function se(e,t){var r=e.optimisticOrder.indexOf(t);-1<r&&(e.optimisticOrder.splice(r,1),e.commutativeKeys.delete(t)),oe(e,t)}function ue(e,t){for(var r in e)ie(t,r,e[r])}function le(e,t){for(var r in e)ne(t,r,e[r])}function fe(e){var t=J;J=j();var r=R.links.optimistic[e];r&&r.forEach(ue),(r=R.records.optimistic[e])&&r.forEach(le),J=t,se(R,e)}function ce(e){var t=R.links,r=R.records,n=[],i=new Set;return ee(e),Z(n,i,e,t),Z(n,i,e,r),n}var pe={current:null};function de(e){return 0<e.__internal.path.length&&e.__internal.errorMap?e.__internal.errorMap[e.__internal.path.join(".")]:void 0}function ve(e,t,r,n,i,a,o){if(e={store:e,variables:t,fragments:r,parent:{__typename:n},parentTypeName:n,parentKey:i,parentFieldKey:"",fieldName:"",error:void 0,partial:!1,optimistic:!!a,__internal:{path:[],errorMap:void 0}},o&&o.graphQLErrors)for(t=0;t<o.graphQLErrors.length;t++)(r=o.graphQLErrors[t]).path&&r.path.length&&(e.__internal.errorMap||(e.__internal.errorMap=Object.create(null)),e.__internal.errorMap[r.path.join(".")]=r);return e}function ye(e,t,r,n,i,a){pe.current=e,e.parent=t,e.parentTypeName=r,e.parentKey=n,e.parentFieldKey=i,e.fieldName=a,e.error=de(e)}function me(t,r,n,i){if(!r)return!1;var a=t.typeCondition?O(t.typeCondition):null;return!a||r===a||!b(t).some((function(t){return t.kind===e.FIELD&&(t=A(O(t),q(t,i)),!(void 0!==te(n,t)||void 0!==re(n,t)))}))}function he(t,r,n,i){var a,o=0;return function(){if(void 0!==a){var s=a();if(void 0!==s)return s;a=void 0}for(;o<n.length;)if(K(s=n[o++],i.variables)){if(s.kind===e.FIELD)return s;if(void 0!==(s=s.kind===e.INLINE_FRAGMENT?s:i.fragments[O(s)])){if(i.store.schema){var u=i.store.schema,l=t;if(l){var f=s.typeCondition?O(s.typeCondition):null;f&&l!==f?u.types[f]&&"OBJECT"===u.types[f].kind?u=f===l:(E(u.types[f]&&("INTERFACE"===u.types[f].kind||"UNION"===u.types[f].kind),"",5),M(u,l),u=u.isSubType(f,l)):u=!0}else u=!1}else u=me(s,t,r,i.variables);if(u)return(a=he(t,r,b(s),i))()}}}}function ke(e){return void 0===e?null:e}function _e(e,t,r,n,i){return B("write",e.data,i||null),e=ge(e,t,r,n),G(),e}function ge(e,t,r,n,i){var a=N(t.query),o={data:r,dependencies:V()},s=e.rootFields[a.operation];return Oe(e=ve(e,w(a,t.variables),x(t.query),s,s,!!i,n),s,b(a),r),o}function Oe(e,t,r,n){var i=t===e.store.rootFields.query,a=!i&&!!e.store.rootNames[t],o=a||i?t:n.__typename;if(o){a||i||!t||ne(t,"__typename",o),r=he(o,t||o,r,e);for(var s;s=r();){i=O(s);var u=q(s,e.variables),l=A(i,u),f=s.alias?s.alias.value:O(s),c=n[f];if("__typename"!==i){if(e.__internal.path.push(f),e.optimistic&&a){if(!(c=e.store.optimisticMutations[i]))continue;ye(e,n,o,o,l,i),c=n[f]=ke(c(u||{},e.store,e))}s.selectionSet?t&&!a?(f=t+"."+l,ie(t||o,l,s=be(e,b(s),ke(c),f))):be(e,b(s),ke(c)):t&&!a&&ne(t||o,l,null===c&&de(e)?void 0:c),a&&(s=e.store.updates[o][i])&&(ye(e,n,o,o,o+"."+l,i),n[i]=c,s(n,u||{},e.store,e)),e.__internal.path.pop()}}}}function be(e,t,r,n){if(Array.isArray(r)){for(var i=Array(r.length),a=0,o=r.length;a<o;a++){e.__internal.path.push(a);var s=be(e,t,r[a],n?n+"."+a:void 0);i[a]=s,e.__internal.path.pop()}return i}return null===r?de(e)?void 0:null:(n=e.store.keyOfEntity(r)||n,Oe(e,n,t,r),n||null)}function qe(e){var t,r;this.keyOfField=A,this.resolveFieldByKey=this.resolve,e||(e={}),this.resolvers=e.resolvers||{},this.optimisticMutations=e.optimistic||{},this.keys=e.keys||{};var n="Query",i="Mutation",a="Subscription";if(e.schema){var o=function(e){function t(e){switch(e.kind){case"OBJECT":case"INTERFACE":return{name:e.name,kind:e.kind,interfaces:i(e.interfaces||[]),fields:i(e.fields.map(r))};case"UNION":return{name:e.name,kind:e.kind,types:i(e.possibleTypes||[])}}}function r(e){return{name:e.name,type:e.type,args:i(e.args)}}var n={},i=T,a={query:(e=e.__schema).queryType?e.queryType.name:null,mutation:e.mutationType?e.mutationType.name:null,subscription:e.subscriptionType?e.subscriptionType.name:null,types:void 0,isSubType:function(e,t){var r=n[e],i=n[t];return!!(r&&i&&("UNION"===r.kind?r.types[t]:"OBJECT"!==r.kind&&"OBJECT"===i.kind?i.interfaces[e]:e===t))}};if(e.types){a.types=n;for(var o=0;o<e.types.length;o++){var s=e.types[o];if(s&&s.name){var u=t(s);u&&(n[s.name]=u)}}}return a}(e.schema);n=o.query||n,i=o.mutation||i,a=o.subscription||a,o.types&&(this.schema=o)}this.updates=((t={})[i]=e.updates&&e.updates.Mutation||{},t[a]=e.updates&&e.updates.Subscription||{},t),this.rootFields={query:n,mutation:i,subscription:a},this.rootNames=((r={})[n]="query",r[i]="mutation",r[a]="subscription",r),e=n,this.data={defer:!1,gc:new Set,persist:new Set,queryRootKey:e,refCount:j(),refLock:j(),links:{optimistic:j(),base:new Map},records:{optimistic:j(),base:new Map},commutativeKeys:new Set,optimisticOrder:[],storage:null}}function we(e,t,r,n,i){return B("read",e.data,r&&i||null),e=Ee(e,t,r,n),G(),e}function Ee(e,t,r,n){var i=N(t.query),a=e.rootFields[i.operation],o=b(i);return r=a!==(e=ve(e,w(i,t.variables),x(t.query),a,a,!1,n)).store.rootFields.query?Ne(e,a,o,r||{}):Ke(e,a,o,{}),{dependencies:V(),partial:e.partial||!r,data:r||null}}function Ne(e,t,r,n){var i=e.store.rootNames[t]?t:n.__typename;if("string"!=typeof i)return n;for(t=he(t,t,r,e),i={__typename:i};r=t();){var a=r.alias?r.alias.value:O(r),o=n[a];e.__internal.path.push(a),r.selectionSet&&null!==o?(o=ke(o),i[a]=xe(e,b(r),o)):i[a]=o,e.__internal.path.pop()}return i}function xe(e,t,r){if(Array.isArray(r)){for(var n=Array(r.length),i=0,a=r.length;i<a;i++)e.__internal.path.push(i),n[i]=xe(e,t,r[i]),e.__internal.path.pop();return n}return null===r?null:null!==(n=e.store.keyOfEntity(r))?void 0===(e=Ke(e,n,t,{}))?null:e:Ne(e,r.__typename,t,r)}function Ke(e,t,r,n,i){var a=e.store,o=t===a.rootFields.query,s=i&&a.keyOfEntity(i)||t;if("string"==typeof(t=o?t:te(s,"__typename")||i&&i.__typename)&&(!i||t===i.__typename)){r=he(t,s,r,e);for(var u,l=!1,f=!1;void 0!==(u=r());){var c=O(u),p=q(u,e.variables),d=u.alias?u.alias.value:O(u),v=A(c,p),y=s+"."+v,m=te(s,v),h=i?i[c]:void 0,k=a.resolvers[t];if("__typename"===c)n[d]=t;else{var _=void 0;if(e.__internal.path.push(d),void 0!==h&&void 0===u.selectionSet)_=h;else if(E(null!==P,"",2),"read"===P&&k&&"function"==typeof k[c]){if(ye(e,n,t,s,y,c),void 0!==m&&(n[d]=m),_=k[c](n,p||{},a,e),u.selectionSet&&(_=Te(e,t,c,y,b(u),n[d],_)),a.schema&&null===_&&!S(a.schema,t,c))return}else u.selectionSet?void 0!==h?_=Te(e,t,c,y,b(u),n[d],h):void 0!==(p=re(s,v))?_=Le(e,p,t,c,b(u),n[d]):"object"==typeof m&&null!==m&&(_=m):_=m;if(void 0===_&&de(e)&&(f=!0,_=null),e.__internal.path.pop(),void 0===_&&a.schema&&S(a.schema,t,c))f=!0,n[d]=null;else{if(void 0===_)return;l=!0,n[d]=_}}}return f&&(e.partial=!0),o&&f&&!l?void 0:n}}function Te(e,t,r,n,i,a,o){if(Array.isArray(o)){var s=e.store;s=!s.schema||F(s.schema,t,r);for(var u=Array(o.length),l=0,f=o.length;l<f;l++){e.__internal.path.push(l);var c=Te(e,t,r,n+"."+l,i,null!=a?a[l]:void 0,o[l]);if(e.__internal.path.pop(),void 0===c&&!s)return;u[l]=void 0!==c?c:null}return u}return null==o?o:null===a?null:"string"==typeof o||"object"==typeof o&&"string"==typeof o.__typename?(t=a||{},"string"==typeof o?Ke(e,o,i,t):Ke(e,n,i,t,o)):void 0}function Le(e,t,r,n,i,a){if(Array.isArray(t)){var o=e.store;o=o.schema&&F(o.schema,r,n);for(var s=Array(t.length),u=0,l=t.length;u<l;u++){e.__internal.path.push(u);var f=Le(e,t[u],r,n,i,null!=a?a[u]:void 0);if(e.__internal.path.pop(),void 0===f&&!o)return;s[u]=void 0!==f?f:null}return s}return null===t||null===a?null:Ke(e,t,i,a||{})}function Se(e,t){return g(e.kind,e,n({},e.context,{meta:n({},e.context.meta,{cacheOutcome:t})}))}function Fe(e,t){return g(e.kind,e,n({},e.context,{requestPolicy:t}))}function Me(e){return y(e[0])}function Ae(e,t){return e.push(t),e}function Ie(e){return"query"===e.kind&&"network-only"!==e.context.requestPolicy}function Ce(e){return"query"!==e.kind||"network-only"===e.context.requestPolicy}function De(e){return"miss"!==e.outcome||"cache-only"===e.operation.context.requestPolicy}function je(e){return function(t){function r(e,t){var r=e.operation,n=e.error,i=e.extensions,a=r.key;if("mutation"===r.kind){var o=C.get(a);b(t,o),C.delete(a)}else ae(I.data,r.key);if(e.data){if(b(t,o=_e(I,r,e.data,e.error,a).dependencies),a=we(I,r,e.data,e.error,a),e.data=a.data,"query"===r.kind){var s=a.dependencies;b(t,s)}}else B("read",I.data,r.key,void 0),G();return s&&m(e.operation,s),{data:e.data,error:n,extensions:i,operation:r}}function n(e){var t=we(I,e),r=t.data?t.partial?"partial":"hit":"miss";return m(e,t.dependencies),{outcome:r,operation:e,data:t.data,dependencies:t.dependencies}}function m(e,t){for(var r in t)(U[r]||(U[r]=[])).push(e.key),R.set(e.key,e)}function h(e){if("query"===e.kind)ae(I.data,e.key);else if("teardown"===e.kind)R.delete(e.key),B("read",I.data,e.key,void 0),G();else if("mutation"===e.kind&&"network-only"!==e.context.requestPolicy){var t=I;B("write",t.data,e.key,!0),t=ge(t,e,{},void 0,!0),G(),t=t.dependencies;e:{for(r in t){var r=!1;break e}r=!0}if(!r){for(var n in t)J[n]=!0;C.set(e.key,t),b(n=new Set,t),k(e,n)}}n=g,t=e.kind,r=e.key;var i=_(e.query);if(e.variables){var a=N(e.query),o=e.variables;if(o&&a.variableDefinitions){for(var s={},u=0,l=a.variableDefinitions.length;u<l;u++){var f=O(a.variableDefinitions[u].variable);s[f]=o[f]}a=s}else a=void 0}else a=e.variables;return n(t,{key:r,query:i,variables:a},e.context)}function k(e,t){t.forEach((function(t){if(t!==e.key){var r=R.get(t);if(r){R.delete(t);var n="cache-first";Q.has(t)&&(Q.delete(t),n="cache-and-network"),A.reexecuteOperation(Fe(r,n))}}}))}function b(e,t){if(t)for(var r in t)if(t=U[r]){U[r]=[];for(var n=0,i=t.length;n<i;n++)e.add(t[n])}}function q(e){for(var t in e)if(J[t])return!0;return!1}function w(e){return Se(e.operation,"miss")}function E(e){return"miss"===e.outcome&&"cache-only"!==e.operation.context.requestPolicy&&!q(e.dependencies)}function x(e){var t=e.operation,r=e.outcome,n=e.dependencies;return e={operation:Se(t,r),data:e.data,error:e.error,extensions:e.extensions},("cache-and-network"===t.context.requestPolicy||"cache-first"===t.context.requestPolicy&&"partial"===r)&&(e.stale=!0,q(n)?"cache-and-network"===t.context.requestPolicy&&Q.add(t.key):A.reexecuteOperation(Fe(t,"network-only"))),e}function K(e){var t=new Set,n=r(e,t);return k(e.operation,t),n}function T(e){return!C.has(e.operation.key)}function L(e){if(P.push(e)<C.size)return f;for(var t=0;t<P.length;t++)ae(I.data,P[t].operation.key);for(var n in J)delete J[n];t=[],n=new Set;for(var i;i=P.shift();)t.push(r(i,n));return k(e.operation,n),y(t)}function S(e){return C.has(e.operation.key)}var F,M=t.forward,A=t.client,I=new qe(e);e&&e.storage&&(F=e.storage.readData().then((function(t){var r=I.data,n=e.storage;for(var i in B("write",r,null),t){var a=t[i];if(void 0!==a){var o=D(i),s=o.entityKey;o=o.fieldKey,":"===a[0]?ie(s,o,JSON.parse(a.slice(1))):ne(s,o,JSON.parse(a))}}G(),r.storage=n})));var C=new Map,P=[],R=new Map,J=j(),Q=new Set,U=j();return function(e){e=i(e);var t=F?a(Me)(o(1)(s(u(Ae,[])(e),l(F)))):f;t=i(c([t,e])),e=i(p(n)(d(Ie)(t))),t=d(Ce)(t);var r=p(w)(d(E)(e));return e=p(x)(d(De)(e)),r=i(M(p(h)(v([t,r])))),t=p(K)(d(T)(r)),r=a(L)(d(S)(r)),v([t,r,e])}}}function Pe(e){return e&&e.networkError&&!e.response&&("undefined"!=typeof navigator&&!1===navigator.onLine||/request failed|failed to fetch|network\s?error/i.test(e.networkError.message))}function Re(t){return function(n){function a(t){var r;if(r="mutation"===t.operation.kind&&Pe(t.error))e:{r=y;var n,i=t.operation,a=i.variables||j(),o=x(i.query);for(i=[].concat(b(N(i.query)));n=i.pop();)if(K(n,a))if(n.kind!==e.FIELD)(n=n.kind===e.INLINE_FRAGMENT?n:o[O(n)])&&i.push.apply(i,b(n));else if(r[O(n)]){r=!0;break e}r=!1}return!r||(h.push(t.operation),_(),!1)}function o(e){return"query"!==e.operation.kind||!Pe(e.error)||(p(Fe(e.operation,"cache-only")),h.push(e.operation),!1)}var s=t.storage;if(s&&s.onOnline&&s.readMetadata&&s.writeMetadata){var u=n.forward,l=n.client;n=n.dispatchDebug;var f=m(),c=f.source,p=f.next,y=t.optimistic||{},h=[],_=function(){for(var e=[],t=0;t<h.length;t++){var n=h[t];"mutation"===n.kind&&e.push({query:r(n.query),variables:n.variables})}s.writeMetadata(e)},q=!1,w=function(){if(!q){q=!0;for(var e=0;e<h.length;e++){var t=h[e];"mutation"===t.kind&&p(g("teardown",t))}for(e=0;e<h.length;e++)l.reexecuteOperation(h[e]);h.length=0,q=!1,_()}};s.onOnline(w),s.readMetadata().then((function(e){if(e){for(var t=0;t<e.length;t++)h.push(l.createRequestOperation("mutation",k(e[t].query,e[t].variables)));w()}}));var E=je(t)({client:l,dispatchDebug:n,forward:function(e){return d(a)(u(e))}});return function(e){return e=i(e),e=v([c,e]),d(o)(E(e))}}return je(t)(n)}}qe.prototype.keyOfEntity=function(e){return pe.current&&e===pe.current.parent?pe.current.parentKey:null==e||"string"==typeof e?e||null:e.__typename?this.rootNames[e.__typename]?e.__typename:(this.keys[e.__typename]?t=this.keys[e.__typename](e):null!=e.id?t=""+e.id:null!=e._id&&(t=""+e._id),t?e.__typename+":"+t:null):null;var t},qe.prototype.resolve=function(e,t,r){return t=A(t,r),(e=this.keyOfEntity(e))?void 0!==(r=te(e,t))?r:re(e,t)||null:null},qe.prototype.invalidate=function(e,t,r){E(e=this.keyOfEntity(e),"",19),t=t?[{fieldKey:A(t,r)}]:ce(e),r=0;for(var n=t.length;r<n;r++){var i=t[r].fieldKey;void 0!==re(e,i)?ie(e,i,void 0):ne(e,i,void 0)}},qe.prototype.inspectFields=function(e){return(e=this.keyOfEntity(e))?ce(e):[]},qe.prototype.updateQuery=function(e,t){(e=k(e.query,e.variables)).query=_(e.query),null!==(t=t(this.readQuery(e)))&&ge(this,e,t)},qe.prototype.readQuery=function(e){return(e=k(e.query,e.variables)).query=_(e.query),Ee(this,e).data},qe.prototype.readFragment=function(e,t,r){e=x(e=_(e));var n=Object.keys(e);if(n=e[n[0]]){var i=n.typeCondition.name.value;"string"==typeof t||t.__typename||(t.__typename=i),r=(t=this.keyOfEntity(t))&&Ke(r=ve(this,r||{},e,i,t),t,b(n),{})||null}else r=null;return r},qe.prototype.writeFragment=function(e,t,r){e=x(e=_(e));var i=Object.keys(e);if(i=e[i[0]]){var a=i.typeCondition.name.value;t=n({},{__typename:a},t);var o=this.keyOfEntity(t);o&&Oe(r=ve(this,r||{},e,a,o,void 0),o,b(i),t)}};export{qe as Store,je as cacheExchange,Re as offlineExchange,we as query,_e as write};
//# sourceMappingURL=urql-exchange-graphcache.min.mjs.map
