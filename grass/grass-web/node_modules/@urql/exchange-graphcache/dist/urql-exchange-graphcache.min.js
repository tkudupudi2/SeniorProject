"use strict";var e=require("@urql/core"),t=require("wonka"),r=require("./1cc90026.min.js"),n=require("graphql"),i=function(e){return e.name.value},a=function(e){return e.typeCondition.name.value},o=function(e){return e.alias?e.alias.value:i(e)},u=function(e){return e.selectionSet?e.selectionSet.selections:[]},s=function(e){return e.typeCondition?i(e.typeCondition):null},f=function(e){return e.kind===n.Kind.FIELD},c=function(e){return e.kind===n.Kind.INLINE_FRAGMENT},l=function(e,t){var r={},a=0;if(e.arguments&&e.arguments.length)for(var o=0,u=e.arguments.length;o<u;o++){var s=e.arguments[o],f=n.valueFromASTUntyped(s.value,t);null!=f&&(r[i(s)]=f,a++)}return 0<a?r:null},p=function(e,t){if(t&&e.variableDefinitions){for(var r={},n=0,a=e.variableDefinitions.length;n<a;n++){var o=i(e.variableDefinitions[n].variable);r[o]=t[o]}return r}},d=function(e,t){var r={};if(!t)return r;if(e.variableDefinitions)for(var a=0,o=e.variableDefinitions.length;a<o;a++){var u=e.variableDefinitions[a],s=i(u.variable);r[s]=void 0===t[s]&&u.defaultValue?n.valueFromASTUntyped(u.defaultValue,t):t[s]}for(var f in t)f in r||(r[f]=t[f]);return r};function y(e,t,r){if(!e)throw(e=Error((t||"Minfied Error #"+r+"\n")+"\nhttps://bit.ly/2XbVrpR#"+r)).name="Graphcache Error",e}new Set;var v=function(e){for(var t=0;t<e.definitions.length;t++)if(e.definitions[t].kind===n.Kind.OPERATION_DEFINITION)return e.definitions[t];y(!1,"",1)},m=function(e){for(var t={},r=0;r<e.definitions.length;r++){var a=e.definitions[r];a.kind===n.Kind.FRAGMENT_DEFINITION&&(t[i(a)]=a)}return t},h=function(e,t){var r=e.directives;if(!r)return!0;for(var a=0,o=r.length;a<o;a++){var u=r[a];if(("include"===(e=i(u))||"skip"===e)&&u.arguments&&u.arguments[0]&&"if"===i(u.arguments[0]))return t=n.valueFromASTUntyped(u.arguments[0].value,t),"include"===e?!!t:!t}return!0};function k(e){for(var t={},r=0;r<e.length;r++)t[e[r].name]=e[r];return t}var _=/^__/,g=function(e,t,r){return!!_.test(r)||!!(e=q(e,t,r))&&"NON_NULL"!==e.type.kind},O=function(e,t,r){return!!(e=q(e,t,r))&&"LIST"===(e="NON_NULL"===e.type.kind?e.type.ofType:e.type).kind&&"NON_NULL"!==e.ofType.kind},b=function(e,t,r){return!!r&&(!(t=s(t))||r===t||(e.types[t]&&"OBJECT"===e.types[t].kind?t===r:(function(e,t){y(e.types[t]&&("INTERFACE"===e.types[t].kind||"UNION"===e.types[t].kind),"",5)}(e,t),w(e,r),e.isSubType(t,r))))},q=function(e,t,r){return w(e,t),e.types[t].fields[r]};function w(e,t){y(e.types[t]&&"OBJECT"===e.types[t].kind,"",3)}var E=function(t,r){return r?t+"("+e.stringifyVariables(r)+")":t},N=function(e,t){return e+"."+t},x=function(e){var t=e.indexOf("(");return-1<t?{fieldKey:e,fieldName:e.slice(0,t),arguments:JSON.parse(e.slice(t+1,-1))}:{fieldKey:e,fieldName:e,arguments:null}},K=function(e){var t=e.indexOf(".");return{entityKey:e.slice(0,t).replace(/%2e/g,"."),fieldKey:e=e.slice(t+1)}},S=function(){return Object.create(null)},T=null,A=null,M=null,F=null,L=!1,D=function(){return{optimistic:S(),base:new Map}},I=function(e,t,r,n){T=e,A=t,M=S(),L=!!n,r?n||0<t.optimisticOrder.length?(n||t.commutativeKeys.has(r)?n&&t.commutativeKeys.delete(r):ee(t,r),F=r,te(t,r)):(F=null,ne(t,r)):F=null},C=function(){var e=A,t=F;if(L=!1,F=null,t&&-1<e.optimisticOrder.indexOf(t))for(t=e.optimisticOrder.length;0<=--t&&e.refLock[e.optimisticOrder[t]]&&e.commutativeKeys.has(e.optimisticOrder[t]);)oe(e.optimisticOrder[t]);M=A=T=null,e.defer||(e.defer=!0,Promise.resolve().then((function(){I("read",e,null),z(),se(),C(),e.defer=!1})))},P=function(e,t,r){I("read",e,t,r),C()},R=function(){return y(null!==M,"",2),M},j=function(e,t,r,n){var i=(e=F?e.optimistic[F]:e.base).get(t);void 0===i&&e.set(t,i=S()),void 0!==n||F?i[r]=n:delete i[r]},U=function(e,t,r){for(var n,i=!L&&"read"===T&&F&&A.commutativeKeys.has(F),a=0,o=A.optimisticOrder.length;a<o;a++){var u=A.optimisticOrder[a],s=e.optimistic[u];if(i=i&&u!==F,!(!s||i&&A.commutativeKeys.has(u)||L&&"write"!==T&&!A.commutativeKeys.has(u))&&void 0!==(n=s.get(t))&&r in n)return n[r]}return void 0!==(n=e.base.get(t))?n[r]:void 0},J=function(e,t,r,n){var i=void 0!==t[r]?t[r]:0;t=t[r]=i+n|0,void 0!==e&&(0>=t?e.add(r):0>=i&&0<t&&e.delete(r))},Q=function(e,t,r,n){if("string"==typeof r)J(e,t,r,n);else if(Array.isArray(r))for(var i=0,a=r.length;i<a;i++){var o=r[i];o&&J(e,t,o,n)}},B=function(e,t,r){if(void 0!==r)for(var n in r)t.has(n)||(e.push(x(n)),t.add(n))},V=function(e,t,r,n){B(e,t,n.base.get(r));for(var i=0,a=A.optimisticOrder.length;i<a;i++){var o=n.optimistic[A.optimisticOrder[i]];void 0!==o&&B(e,t,o.get(r))}};function G(e,t,r){if(0<(A.refCount[e]||0))r.delete(e);else{for(var n in A.refLock){if(0<((t=A.refLock[n])[e]||0))return;delete t[e]}if(delete A.refCount[e],r.delete(e),A.records.base.delete(e),n=A.links.base.get(e))for(var i in A.links.base.delete(e),n)Q(r,A.refCount,n[i],-1)}}var z=function(){A.gc.forEach(G)},X=function(e,t){"__typename"!==t&&(e!==A.queryRootKey?M[e]=!0:void 0!==t&&(M[N(e,t)]=!0))},H=function(e,t){!L&&A.storage&&A.persist.add(function(e,t){return e.replace(/\./g,"%2e")+"."+t}(e,t))},W=function(e,t){return X(e,t),U(A.records,e,t)},Y=function(e,t){return X(e,t),U(A.links,e,t)},Z=function(e,t,r){X(e,t),H(e,t),j(A.records,e,t,r)},$=function(e,t,r){var n=A;if(F)var i=n.refLock[F]||(n.refLock[F]=S()),a=n.links.optimistic[F];else{i=n.refCount,a=n.links.base;var o=n.gc}a=(a=a&&a.get(e))&&a[t],X(e,t),H(e,t),j(n.links,e,t,r),Q(o,i,a,-1),Q(o,i,r,1)},ee=function(e,t){var r=e.optimisticOrder.indexOf(t);-1===r?e.optimisticOrder.unshift(t):e.commutativeKeys.has(t)||(re(e,t),e.optimisticOrder.splice(r,1),e.optimisticOrder.unshift(t)),e.commutativeKeys.add(t)},te=function(e,t){-1===e.optimisticOrder.indexOf(t)&&e.optimisticOrder.unshift(t),e.refLock[t]||(e.refLock[t]=S(),e.links.optimistic[t]=new Map,e.records.optimistic[t]=new Map)},re=function(e,t){e.refLock[t]&&(delete e.refLock[t],delete e.records.optimistic[t],delete e.links.optimistic[t])},ne=function(e,t){var r=e.optimisticOrder.indexOf(t);-1<r&&(e.optimisticOrder.splice(r,1),e.commutativeKeys.delete(t)),re(e,t)};function ie(e,t){for(var r in e)$(t,r,e[r])}function ae(e,t){for(var r in e)Z(t,r,e[r])}var oe=function(e){var t=M;M=S();var r=A.links.optimistic[e];r&&r.forEach(ie),(r=A.records.optimistic[e])&&r.forEach(ae),M=t,ne(A,e)},ue=function(e){var t=A.links,r=A.records,n=[],i=new Set;return X(e),V(n,i,e,t),V(n,i,e,r),n},se=function(){if(A.storage){L=!0,T="read";var t=S();A.persist.forEach((function(r){var n,i=K(r),a=i.entityKey;t[r]=void 0!==(n=Y(a,i=i.fieldKey))?":"+e.stringifyVariables(n):void 0!==(n=W(a,i))?e.stringifyVariables(n):void 0})),L=!1,A.storage.writeData(t),A.persist.clear()}},fe={current:null},ce=function(e){return 0<e.__internal.path.length&&e.__internal.errorMap?e.__internal.errorMap[e.__internal.path.join(".")]:void 0},le=function(e,t,r,n,i,a,o){if(e={store:e,variables:t,fragments:r,parent:{__typename:n},parentTypeName:n,parentKey:i,parentFieldKey:"",fieldName:"",error:void 0,partial:!1,optimistic:!!a,__internal:{path:[],errorMap:void 0}},o&&o.graphQLErrors)for(t=0;t<o.graphQLErrors.length;t++)(r=o.graphQLErrors[t]).path&&r.path.length&&(e.__internal.errorMap||(e.__internal.errorMap=Object.create(null)),e.__internal.errorMap[r.path.join(".")]=r);return e},pe=function(e,t,r,n,i,a){fe.current=e,e.parent=t,e.parentTypeName=r,e.parentKey=n,e.parentFieldKey=i,e.fieldName=a,e.error=ce(e)},de=function(e,t,r,n){if(!t)return!1;var a=s(e);return!a||t===a||!u(e).some((function(e){return!!f(e)&&(e=E(i(e),l(e,n)),!function(e,t){return void 0!==W(e,t)||void 0!==Y(e,t)}(r,e))}))},ye=function(e,t,r,n){var a,o=0;return function(){if(void 0!==a){var s=a();if(void 0!==s)return s;a=void 0}for(;o<r.length;)if(s=r[o++],h(s,n.variables)){if(f(s))return s;if(void 0!==(s=c(s)?s:n.fragments[i(s)])&&(n.store.schema?b(n.store.schema,s,e):de(s,e,t,n.variables)))return(a=ye(e,t,u(s),n))()}}},ve=function(e){return void 0===e?null:e},me=function(e,t,r,n,i){return I("write",e.data,i||null),e=he(e,t,r,n),C(),e},he=function(e,t,r,n,i){var a=v(t.query),o={data:r,dependencies:R()},s=e.rootFields[a.operation];return e=le(e,d(a,t.variables),m(t.query),s,s,!!i,n),ke(e,s,u(a),r),o},ke=function(e,t,r,n){var a=t===e.store.rootFields.query,s=!a&&!!e.store.rootNames[t],f=s||a?t:n.__typename;if(f){s||a||!t||Z(t,"__typename",f),r=ye(f,t||f,r,e);for(var c;c=r();){a=i(c);var p=l(c,e.variables),d=E(a,p),y=o(c),v=n[y];if("__typename"!==a){if(e.__internal.path.push(y),e.optimistic&&s){if(!(v=e.store.optimisticMutations[a]))continue;pe(e,n,f,f,d,a),v=n[y]=ve(v(p||{},e.store,e))}c.selectionSet?t&&!s?(y=N(t,d),c=_e(e,u(c),ve(v),y),$(t||f,d,c)):_e(e,u(c),ve(v)):t&&!s&&Z(t||f,d,null===v&&ce(e)?void 0:v),s&&(c=e.store.updates[f][a])&&(pe(e,n,f,f,N(f,d),a),n[a]=v,c(n,p||{},e.store,e)),e.__internal.path.pop()}}}},_e=function(e,t,r,n){if(Array.isArray(r)){for(var i=Array(r.length),a=0,o=r.length;a<o;a++){e.__internal.path.push(a);var u=n?N(n,""+a):void 0;u=_e(e,t,r[a],u),i[a]=u,e.__internal.path.pop()}return i}return null===r?ce(e)?void 0:null:(n=e.store.keyOfEntity(r)||n,ke(e,n,t,r),n||null)},ge=function(e){var t,r;this.keyOfField=E,this.resolveFieldByKey=this.resolve,e||(e={}),this.resolvers=e.resolvers||{},this.optimisticMutations=e.optimistic||{},this.keys=e.keys||{};var n="Query",i="Mutation",a="Subscription";if(e.schema){var o=function(e){function t(e){return{name:e.name,type:e.type,args:n(e.args)}}var r={},n=k,i=function(e){switch(e.kind){case"OBJECT":case"INTERFACE":return{name:e.name,kind:e.kind,interfaces:n(e.interfaces||[]),fields:n(e.fields.map(t))};case"UNION":return{name:e.name,kind:e.kind,types:n(e.possibleTypes||[])}}},a={query:(e=e.__schema).queryType?e.queryType.name:null,mutation:e.mutationType?e.mutationType.name:null,subscription:e.subscriptionType?e.subscriptionType.name:null,types:void 0,isSubType:function(e,t){var n=r[e],i=r[t];return!!(n&&i&&("UNION"===n.kind?n.types[t]:"OBJECT"!==n.kind&&"OBJECT"===i.kind?i.interfaces[e]:e===t))}};if(e.types){a.types=r;for(var o=0;o<e.types.length;o++){var u=e.types[o];if(u&&u.name){var s=i(u);s&&(r[u.name]=s)}}}return a}(e.schema);n=o.query||n,i=o.mutation||i,a=o.subscription||a,o.types&&(this.schema=o)}this.updates=((t={})[i]=e.updates&&e.updates.Mutation||{},t[a]=e.updates&&e.updates.Subscription||{},t),this.rootFields={query:n,mutation:i,subscription:a},this.rootNames=((r={})[n]="query",r[i]="mutation",r[a]="subscription",r),this.data=function(e){return{defer:!1,gc:new Set,persist:new Set,queryRootKey:e,refCount:S(),refLock:S(),links:D(),records:D(),commutativeKeys:new Set,optimisticOrder:[],storage:null}}(n)};ge.prototype.keyOfEntity=function(e){return fe.current&&e===fe.current.parent?fe.current.parentKey:null==e||"string"==typeof e?e||null:e.__typename?this.rootNames[e.__typename]?e.__typename:(this.keys[e.__typename]?t=this.keys[e.__typename](e):null!=e.id?t=""+e.id:null!=e._id&&(t=""+e._id),t?e.__typename+":"+t:null):null;var t},ge.prototype.resolve=function(e,t,r){return t=E(t,r),(e=this.keyOfEntity(e))?void 0!==(r=W(e,t))?r:Y(e,t)||null:null},ge.prototype.invalidate=function(e,t,r){y(e=this.keyOfEntity(e),"",19),function(e,t,r){t=t?[{fieldKey:E(t,r)}]:ue(e),r=0;for(var n=t.length;r<n;r++){var i=t[r].fieldKey;void 0!==Y(e,i)?$(e,i,void 0):Z(e,i,void 0)}}(e,t,r)},ge.prototype.inspectFields=function(e){return(e=this.keyOfEntity(e))?ue(e):[]},ge.prototype.updateQuery=function(t,r){(t=e.createRequest(t.query,t.variables)).query=e.formatDocument(t.query),null!==(r=r(this.readQuery(t)))&&he(this,t,r)},ge.prototype.readQuery=function(t){return(t=e.createRequest(t.query,t.variables)).query=e.formatDocument(t.query),be(this,t).data},ge.prototype.readFragment=function(t,r,n){return Ee(this,e.formatDocument(t),r,n)},ge.prototype.writeFragment=function(t,n,i){!function(e,t,n,i){t=m(t);var o=Object.keys(t);if(o=t[o[0]]){var s=a(o);n=r._extends({},{__typename:s},n);var f=e.keyOfEntity(n);f&&(e=le(e,i||{},t,s,f,void 0),ke(e,f,u(o),n))}}(this,e.formatDocument(t),n,i)};var Oe=function(e,t,r,n,i){return I("read",e.data,r&&i||null),e=be(e,t,r,n),C(),e},be=function(e,t,r,n){var i=v(t.query),a=e.rootFields[i.operation],o=u(i);return r=a!==(e=le(e,d(i,t.variables),m(t.query),a,a,!1,n)).store.rootFields.query?qe(e,a,o,r||{}):Ne(e,a,o,{}),{dependencies:R(),partial:e.partial||!r,data:r||null}},qe=function(e,t,r,n){var i=e.store.rootNames[t]?t:n.__typename;if("string"!=typeof i)return n;for(t=ye(t,t,r,e),i={__typename:i};r=t();){var a=o(r),s=n[a];e.__internal.path.push(a),r.selectionSet&&null!==s?(s=ve(s),i[a]=we(e,u(r),s)):i[a]=s,e.__internal.path.pop()}return i},we=function(e,t,r){if(Array.isArray(r)){for(var n=Array(r.length),i=0,a=r.length;i<a;i++)e.__internal.path.push(i),n[i]=we(e,t,r[i]),e.__internal.path.pop();return n}return null===r?null:null!==(n=e.store.keyOfEntity(r))?void 0===(e=Ne(e,n,t,{}))?null:e:qe(e,r.__typename,t,r)},Ee=function(e,t,r,n){t=m(t);var i=Object.keys(t);if(!(i=t[i[0]]))return null;var o=a(i);return"string"==typeof r||r.__typename||(r.__typename=o),(r=e.keyOfEntity(r))?(e=le(e,n||{},t,o,r),Ne(e,r,u(i),{})||null):null},Ne=function(e,t,r,n,a){var s=e.store,f=t===s.rootFields.query,c=a&&s.keyOfEntity(a)||t;if("string"==typeof(t=f?t:W(c,"__typename")||a&&a.__typename)&&(!a||t===a.__typename)){r=ye(t,c,r,e);for(var p,d=!1,v=!1;void 0!==(p=r());){var m=i(p),h=l(p,e.variables),k=o(p),_=E(m,h),O=N(c,_),b=W(c,_),q=a?a[m]:void 0,w=s.resolvers[t];if("__typename"===m)n[k]=t;else{var x=void 0;if(e.__internal.path.push(k),void 0!==q&&void 0===p.selectionSet)x=q;else if("read"===(y(null!==T,"",2),T)&&w&&"function"==typeof w[m]){if(pe(e,n,t,c,O,m),void 0!==b&&(n[k]=b),x=w[m](n,h||{},s,e),p.selectionSet&&(x=xe(e,t,m,O,u(p),n[k],x)),s.schema&&null===x&&!g(s.schema,t,m))return}else p.selectionSet?void 0!==q?x=xe(e,t,m,O,u(p),n[k],q):void 0!==(h=Y(c,_))?x=Ke(e,h,t,m,u(p),n[k]):"object"==typeof b&&null!==b&&(x=b):x=b;if(void 0===x&&ce(e)&&(v=!0,x=null),e.__internal.path.pop(),void 0===x&&s.schema&&g(s.schema,t,m))v=!0,n[k]=null;else{if(void 0===x)return;d=!0,n[k]=x}}}return v&&(e.partial=!0),f&&v&&!d?void 0:n}},xe=function(e,t,r,n,i,a,o){if(Array.isArray(o)){var u=e.store;u=!u.schema||O(u.schema,t,r);for(var s=Array(o.length),f=0,c=o.length;f<c;f++){e.__internal.path.push(f);var l=xe(e,t,r,N(n,""+f),i,null!=a?a[f]:void 0,o[f]);if(e.__internal.path.pop(),void 0===l&&!u)return;s[f]=void 0!==l?l:null}return s}return null==o?o:null===a?null:Se(o)?(t=a||{},"string"==typeof o?Ne(e,o,i,t):Ne(e,n,i,t,o)):void 0},Ke=function(e,t,r,n,i,a){if(Array.isArray(t)){var o=e.store;o=o.schema&&O(o.schema,r,n);for(var u=Array(t.length),s=0,f=t.length;s<f;s++){e.__internal.path.push(s);var c=Ke(e,t[s],r,n,i,null!=a?a[s]:void 0);if(e.__internal.path.pop(),void 0===c&&!o)return;u[s]=void 0!==c?c:null}return u}return null===t||null===a?null:Ne(e,t,i,a||{})},Se=function(e){return"string"==typeof e||"object"==typeof e&&"string"==typeof e.__typename},Te=function(t,n){return e.makeOperation(t.kind,t,r._extends({},t.context,{meta:r._extends({},t.context.meta,{cacheOutcome:n})}))},Ae=function(t,n){return e.makeOperation(t.kind,t,r._extends({},t.context,{requestPolicy:n}))};function Me(e){return t.fromArray(e[0])}function Fe(e,t){return e.push(t),e}function Le(e){return"query"===e.kind&&"network-only"!==e.context.requestPolicy}function De(e){return"query"!==e.kind||"network-only"===e.context.requestPolicy}function Ie(e){return"miss"!==e.outcome||"cache-only"===e.operation.context.requestPolicy}var Ce=function(r){return function(n){function i(e){return Te(e.operation,"miss")}function a(e){return"miss"===e.outcome&&"cache-only"!==e.operation.context.requestPolicy&&!q(e.dependencies)}function o(e){var t=e.operation,r=e.outcome,n=e.dependencies;return e={operation:Te(t,r),data:e.data,error:e.error,extensions:e.extensions},("cache-and-network"===t.context.requestPolicy||"cache-first"===t.context.requestPolicy&&"partial"===r)&&(e.stale=!0,q(n)?"cache-and-network"===t.context.requestPolicy&&O.add(t.key):y.reexecuteOperation(Ae(t,"network-only"))),e}function u(e){var t=new Set,r=A(e,t);return E(e.operation,t),r}function s(e){return!h.has(e.operation.key)}function f(e){if(k.push(e)<h.size)return t.empty;for(var r=0;r<k.length;r++)ee(m.data,k[r].operation.key);for(var n in g)delete g[n];r=[],n=new Set;for(var i;i=k.shift();)r.push(A(i,n));return E(e.operation,n),t.fromArray(r)}function c(e){return h.has(e.operation.key)}var l,d=n.forward,y=n.client,m=new ge(r);r&&r.storage&&(l=r.storage.readData().then((function(e){!function(e,t,r){for(var n in I("write",e,null),r){var i=r[n];if(void 0!==i){var a=K(n),o=a.entityKey;a=a.fieldKey,":"===i[0]?$(o,a,JSON.parse(i.slice(1))):Z(o,a,JSON.parse(i))}}C(),e.storage=t}(m.data,r.storage,e)})));var h=new Map,k=[],_=new Map,g=S(),O=new Set,b=S(),q=function(e){for(var t in e)if(g[t])return!0;return!1},w=function(e,t){if(t)for(var r in t)if(t=b[r]){b[r]=[];for(var n=0,i=t.length;n<i;n++)e.add(t[n])}},E=function(e,t){t.forEach((function(t){if(t!==e.key){var r=_.get(t);if(r){_.delete(t);var n="cache-first";O.has(t)&&(O.delete(t),n="cache-and-network"),y.reexecuteOperation(Ae(r,n))}}}))},N=function(t){if("query"===t.kind)ee(m.data,t.key);else if("teardown"===t.kind)_.delete(t.key),P(m.data,t.key);else if("mutation"===t.kind&&"network-only"!==t.context.requestPolicy){var r=function(e,t,r){return I("write",e.data,r,!0),e=he(e,t,{},void 0,!0),C(),e}(m,t,t.key).dependencies;if(!function(e){for(var t in e)return!1;return!0}(r)){for(var n in r)g[n]=!0;h.set(t.key,r),n=new Set,w(n,r),E(t,n)}}return e.makeOperation(t.kind,{key:t.key,query:e.formatDocument(t.query),variables:t.variables?p(v(t.query),t.variables):t.variables},t.context)},x=function(e,t){for(var r in t)(b[r]||(b[r]=[])).push(e.key),_.set(e.key,e)},T=function(e){var t=Oe(m,e),r=t.data?t.partial?"partial":"hit":"miss";return x(e,t.dependencies),{outcome:r,operation:e,data:t.data,dependencies:t.dependencies}},A=function(e,t){var r=e.operation,n=e.error,i=e.extensions,a=r.key;if("mutation"===r.kind){var o=h.get(a);w(t,o),h.delete(a)}else ee(m.data,r.key);if(e.data){if(o=me(m,r,e.data,e.error,a).dependencies,w(t,o),a=Oe(m,r,e.data,e.error,a),e.data=a.data,"query"===r.kind){var u=a.dependencies;w(t,u)}}else P(m.data,r.key);return u&&x(e.operation,u),{data:e.data,error:n,extensions:i,operation:r}};return function(e){e=t.share(e);var r=l?t.mergeMap(Me)(t.take(1)(t.combine(t.scan(Fe,[])(e),t.fromPromise(l)))):t.empty;r=t.share(t.concat([r,e])),e=t.share(t.map(T)(t.filter(Le)(r))),r=t.filter(De)(r);var n=t.map(i)(t.filter(a)(e));return e=t.map(o)(t.filter(Ie)(e)),n=t.share(d(t.map(N)(t.merge([r,n])))),r=t.map(u)(t.filter(s)(n)),n=t.mergeMap(f)(t.filter(c)(n)),t.merge([r,n,e])}}},Pe=function(e){return e&&e.networkError&&!e.response&&("undefined"!=typeof navigator&&!1===navigator.onLine||/request failed|failed to fetch|network\s?error/i.test(e.networkError.message))};exports.Store=ge,exports.cacheExchange=Ce,exports.offlineExchange=function(r){return function(a){function o(e){return"mutation"!==e.operation.kind||!Pe(e.error)||!function(e,t){var r,n=t.variables||S(),a=m(t.query);for(t=[].concat(u(v(t.query)));r=t.pop();)if(h(r,n))if(f(r)){if(e[i(r)])return!0}else(r=c(r)?r:a[i(r)])&&t.push.apply(t,u(r));return!1}(g,e.operation)||(O.push(e.operation),b(),!1)}function s(e){return"query"!==e.operation.kind||!Pe(e.error)||(_(Ae(e.operation,"cache-only")),O.push(e.operation),!1)}var l=r.storage;if(l&&l.onOnline&&l.readMetadata&&l.writeMetadata){var p=a.forward,d=a.client;a=a.dispatchDebug;var y=t.makeSubject(),k=y.source,_=y.next,g=r.optimistic||{},O=[],b=function(){for(var e=[],t=0;t<O.length;t++){var r=O[t];"mutation"===r.kind&&e.push({query:n.print(r.query),variables:r.variables})}l.writeMetadata(e)},q=!1,w=function(){if(!q){q=!0;for(var t=0;t<O.length;t++){var r=O[t];"mutation"===r.kind&&_(e.makeOperation("teardown",r))}for(t=0;t<O.length;t++)d.reexecuteOperation(O[t]);O.length=0,q=!1,b()}};l.onOnline(w),l.readMetadata().then((function(t){if(t){for(var r=0;r<t.length;r++)O.push(d.createRequestOperation("mutation",e.createRequest(t[r].query,t[r].variables)));w()}}));var E=Ce(r)({client:d,dispatchDebug:a,forward:function(e){return t.filter(o)(p(e))}});return function(e){return e=t.share(e),e=t.merge([k,e]),t.filter(s)(E(e))}}return Ce(r)(a)}},exports.query=Oe,exports.write=me;
//# sourceMappingURL=urql-exchange-graphcache.min.js.map
