function t(a) {
  return "string" == typeof a ? a : null;
}

function v(a, e, g) {
  var c, b, d, l, p;
  for (c = new Set, b = 0, d = e.length; b < d; b++) {
    "string" == typeof (l = a.resolve(e[b], "node")) && c.add(l);
  }
  e = e.slice();
  b = 0;
  for (d = g.length; b < d; b++) {
    "string" != typeof (p = a.resolve(l = g[b], "node")) || c.has(p) || (c.add(p), e.push(l));
  }
  return e;
}

function C(a, e) {
  var g, c, b, d;
  for (g = new Set, c = 0, b = a.length; c < b; c++) {
    "string" == typeof (d = a[c]) && g.add(d);
  }
  a = a.slice();
  c = 0;
  for (b = e.length; c < b; c++) {
    "string" != typeof (d = e[c]) || g.has(d) || (g.add(d), a.push(d));
  }
  return a;
}

function D(a, e) {
  var g, c, b, d;
  for (g in e) {
    if ("first" !== g && "last" !== g && "after" !== g && "before" !== g) {
      if (!(g in a)) {
        return !1;
      }
      if (typeof (c = a[g]) != typeof (b = e[g]) || "object" != typeof c ? c !== b : stringifyVariables(c) !== stringifyVariables(b)) {
        return !1;
      }
    }
  }
  for (d in a) {
    if ("first" !== d && "last" !== d && "after" !== d && "before" !== d && !(d in e)) {
      return !1;
    }
  }
  return !0;
}

function E(a, e, g) {
  var b, d, l, p, c = t(a.resolve(e, g));
  if (!c) {
    return null;
  }
  g = a.resolve(c, "__typename");
  e = a.resolve(c, "edges") || [];
  b = a.resolve(c, "nodes") || [];
  if ("string" != typeof g) {
    return null;
  }
  g = {
    __typename: g,
    edges: e,
    nodes: b,
    pageInfo: r
  };
  if ("string" == typeof (d = a.resolve(c, "pageInfo"))) {
    c = t(a.resolve(d, "__typename"));
    b = t(a.resolve(d, "endCursor"));
    l = t(a.resolve(d, "startCursor")), p = a.resolve(d, "hasNextPage");
    d = a.resolve(d, "hasPreviousPage");
    null === (c = g.pageInfo = {
      __typename: "string" == typeof c ? c : "PageInfo",
      hasNextPage: "boolean" == typeof p ? p : !!b,
      hasPreviousPage: "boolean" == typeof d ? d : !!l,
      endCursor: b,
      startCursor: l
    }).endCursor && (b = e[e.length - 1]) && (b = a.resolve(b, "cursor"), c.endCursor = t(b));
    null === c.startCursor && (e = e[0]) && (a = a.resolve(e, "cursor"), c.startCursor = t(a));
  }
  return g;
}

function relayPagination(a) {
  void 0 === a && (a = {});
  var e = a.mergeMode || "inwards";
  return function(a, c, b, d) {
    var g, p, w, A, m, u, q, n, k, x, h, f, y, z;
    g = d.fieldName;
    if (0 !== (w = (p = b.inspectFields(a = d.parentKey).filter((function(a) {
      return a.fieldName === g;
    }))).length)) {
      for (A = null, m = [], u = [], q = [], n = [], k = _extends({}, r), x = 0; x < w; x++) {
        f = (h = p[x]).fieldKey;
        if (null !== (h = h.arguments) && D(c, h) && null !== (f = E(b, a, f))) {
          if ("inwards" === e && "number" == typeof h.last && "number" == typeof h.first) {
            k = f.edges.slice(0, h.first + 1);
            y = f.edges.slice(-h.last), z = f.nodes.slice(0, h.first + 1);
            h = f.nodes.slice(-h.last);
            m = v(b, m, k);
            u = v(b, y, u);
            q = C(q, z);
            n = C(h, n);
            k = f.pageInfo;
          } else {
            h.after ? (m = v(b, m, f.edges), q = C(q, f.nodes), k.endCursor = f.pageInfo.endCursor, 
            k.hasNextPage = f.pageInfo.hasNextPage) : h.before ? (u = v(b, f.edges, u), n = C(f.nodes, n), 
            k.startCursor = f.pageInfo.startCursor, k.hasPreviousPage = f.pageInfo.hasPreviousPage) : ("number" == typeof h.last ? (u = v(b, f.edges, u), 
            n = C(f.nodes, n)) : (m = v(b, m, f.edges), q = C(q, f.nodes)), k = f.pageInfo);
          }
          f.pageInfo.__typename !== k.__typename && (k.__typename = f.pageInfo.__typename);
          A !== f.__typename && (A = f.__typename);
        }
      }
      if ("string" == typeof A) {
        if (!t(b.resolve(a, g, c))) {
          if (d.store.schema) {
            d.partial = !0;
          } else {
            return;
          }
        }
        return {
          __typename: A,
          edges: "inwards" === e ? v(b, m, u) : v(b, u, m),
          nodes: "inwards" === e ? C(q, n) : C(n, q),
          pageInfo: {
            __typename: k.__typename,
            endCursor: k.endCursor,
            startCursor: k.startCursor,
            hasNextPage: k.hasNextPage,
            hasPreviousPage: k.hasPreviousPage
          }
        };
      }
    }
  };
}

function simplePagination(a) {
  function e(a, b) {
    var d, e, l, m;
    for (d in b) {
      if (d !== g && d !== c) {
        if (!(d in a)) {
          return !1;
        }
        if (typeof (e = a[d]) != typeof (l = b[d]) || "object" != typeof e ? e !== l : stringifyVariables(e) !== stringifyVariables(l)) {
          return !1;
        }
      }
    }
    for (m in a) {
      if (m !== g && m !== c && !(m in b)) {
        return !1;
      }
    }
    return !0;
  }
  var g, c, b;
  void 0 === a && (a = {});
  void 0 === (g = a.offsetArgument) && (g = "skip");
  void 0 === (c = a.limitArgument) && (c = "limit");
  void 0 === (b = a.mergeMode) && (b = "after");
  return function(a, c, p, w) {
    var d, m, l, q, n, k, x, h, f, y, z, B;
    d = w.fieldName;
    if (0 !== (l = (m = p.inspectFields(a = w.parentKey).filter((function(a) {
      return a.fieldName === d;
    }))).length)) {
      for (q = new Set, n = [], k = null, x = 0; x < l; x++) {
        f = (h = m[x]).fieldKey;
        if (null !== (h = h.arguments) && e(c, h) && (f = p.resolve(a, f), h = h[g], null !== f && 0 !== f.length && "number" == typeof h)) {
          for (y = [], z = 0; z < f.length; z++) {
            q.has(B = f[z]) || (y.push(B), q.add(B));
          }
          n = (!k || h > k) == ("after" === b) ? n.concat(y) : y.concat(n);
          k = h;
        }
      }
      if (p.resolve(a, d, c)) {
        return n;
      }
      if (w.store.schema) {
        return w.partial = !0, n;
      }
    }
  };
}

import { stringifyVariables } from "@urql/core";

import { _ as _extends } from "./5301ccd2.mjs";

var r = {
  __typename: "PageInfo",
  endCursor: null,
  startCursor: null,
  hasNextPage: !1,
  hasPreviousPage: !1
};

export { relayPagination, simplePagination };
//# sourceMappingURL=urql-exchange-graphcache-extras.mjs.map
